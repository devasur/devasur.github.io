var AdvancedSearch=function(){var a=new google.maps.StreetViewService,b=function(a){return a.indexOf("www.google.")>0},c=function(a){return a.indexOf("/maps/")>0},d=function(a){return a.indexOf("googleusercontent.com")>0},e=function(a){return a.indexOf("/maps/uv?")>0},f=function(a){return a.indexOf("@")>0},g=function(a){return a.indexOf("/data=")>0},h=function(a,g){var a=unescape(a.trim());a=decodeURI(a),b(a)&&c(a)&&f(a)&&!d(a)&&!e(a)?o(a,function(a){g(a)}):e(a)?k(a,function(a){g(a)}):p(a)&&q(a)?r(a,function(a){g(a)}):l(a)?j(a,function(a){g(a)}):n(a)?m(a,function(a){g(a)}):g(null)};this.getStreetviewFromUrl=function(b,c){h(b,function(b){b&&b.panoid?a.getPanorama({pano:b.panoid},function(a,d){c({lat:a.location.latLng.lat(),lng:a.location.latLng.lng(),heading:b.heading,pitch:b.pitch,panoid:a.location.pano})}):c(b)})};var i=function(a){if(!a||""==a)return!1;var b=a.split("|");return!(b.length<6)&&(!(isNaN(b[0])||isNaN(b[1])||isNaN(b[2])||isNaN(b[3])||isNaN(b[4]))&&""!=b[5])},j=function(a,b){try{var a=unescape(a),c=a.indexOf("@");if(-1==c)return void b(null);var d=a.indexOf("/data=");if(-1==c)return void b(null);var e=a.substr(c+1,d-c-1),f=e.split(","),g=f[0]?f[0]:0,h=f[1]?f[1]:0,i=(f[3]&&f[3],f[4]?f[4].substr(0,f[4].length-1):0),j=f[5]?f[5].substr(0,f[5].length-1):0,k=d+"/data=!3m8!1e1!3m6!1s".length,l=a.indexOf("!2e",k),m=null;-1!=k&&-1!=l&&k<l&&(m="F:"+a.substring(k,l)),b({lat:parseFloat(g),lng:parseFloat(h),heading:parseFloat(i),pitch:parseFloat(j)-90,panoid:m})}catch(a){b(null)}},k=function(a,b){try{a=decodeURIComponent(a);var c="panoid=",d=a.indexOf(c),e="&output=";-1==d&&(c="&imagekey=!1e2!2s",d=a.indexOf(c),e="");var f=d+c.length,g=a.substring(f),h=g.indexOf(e),i=g.substring(0,h);b({lat:0,lng:0,panoid:i,heading:0,pitch:0,zoom:0})}catch(a){b(null)}},l=function(a){return!!(b(a)&&d(a)&&f(a)&&g(a))},m=function(a,b){var c=a.substring(a.indexOf("?scene=")+"?scene=".length);if(i(c)){var d=c.split("|");b({lat:parseFloat(d[0]),lng:parseFloat(d[1]),panoid:d[5],heading:parseFloat(d[2]),pitch:parseFloat(d[3]),zoom:parseFloat(d[4])})}else b(null)},n=function(a){if(!a||""==a)return!1;if(a.indexOf("/tour/")>0&&a.indexOf("?scene=")>0){var b=a.substring(a.indexOf("?scene=")+"?scene=".length);if(i(b))return!0}return!1},o=function(a,b){var c=a.indexOf("@");if(-1==c)return void b(null);var d=a.indexOf("/data=");if(-1==c)return void b(null);var e=a.substr(c+1,d-c-1),f=e.split(","),g=f[0]?f[0]:0,h=f[1]?f[1]:0,i=(f[3]&&f[3],f[4]?f[4].substr(0,f[4].length-1):0),j=f[5]?f[5].substr(0,f[5].length-1):0,k=a.substr(d+"/data=!3m5!1e1!3m3!1s".length),l=k.indexOf("!"),m=k.substr(0,l);m&&m.length>25&&(m="F:"+m),b({lat:g,lng:h,heading:parseFloat(i),pitch:parseFloat(j)-90,panoid:m})},p=function(a){return a.indexOf("//maps.google.")>0},q=function(a){return a.indexOf("&layer=c&")>0},r=function(a,b){var c=a.substr(a.indexOf("?")+1),d=c.split("&");if(d.length<8)return void b(null);var e,f,g;for(index in d){var h=d[index].split("=");switch(h[0]){case"cbll":e=h[1];break;case"panoid":f=h[1];break;case"z":h[1];break;case"cbp":g=h[1]}}var i=e.split(",")[0],j=e.split(",")[1],k=g.split(","),l=0,m=0;k.length>=5&&(l=k[4],m=k[1]),b({lat:i,lng:j,heading:parseFloat(m),pitch:parseFloat(l),panoid:f})}};